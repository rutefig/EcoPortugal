(this["webpackJsonpecoportugal-app-v1"]=this["webpackJsonpecoportugal-app-v1"]||[]).push([[0],{59:function(e,a,t){e.exports=t(74)},64:function(e,a,t){},65:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(26),c=t.n(o),l=(t(64),t(65),t(66),t(77)),i=t(8),m=t(83),s=t(82),u=function(){return r.a.createElement(m.a,{bg:"light",variant:"light"},r.a.createElement(m.a.Brand,{href:"/"},"EcoPortugal"),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(s.a,{className:"ml-auto"},r.a.createElement(s.a.Link,{href:"#sugerir"},"Sugerir"),r.a.createElement(s.a.Link,{href:"#reportar"},"Reportar"),r.a.createElement(s.a.Link,{href:"#informacoes"},"Informa\xe7\xf5es")))},d=function(){return r.a.createElement("footer",{className:"footer bg-light text-center"},r.a.createElement("p",{className:"text-secondary"},"@Copyright Rute Figueiredo ",r.a.createElement("br",null),"Vers\xe3o 1 - Julho 2020"))},E=t(6),f=[{id:1,name:"Papel",icon:"https://image.flaticon.com/icons/svg/1598/1598407.svg"},{id:2,name:"Pl\xe1stico",icon:"https://image.flaticon.com/icons/svg/1598/1598406.svg"},{id:3,name:"Vidro",icon:"https://image.flaticon.com/icons/svg/1598/1598173.svg"},{id:4,name:"Pilhas",icon:"https://image.flaticon.com/icons/svg/1730/1730780.svg"},{id:5,name:"L\xe2mpadas",icon:"https://image.flaticon.com/icons/svg/2910/2910875.svg"},{id:6,name:"Pequenos Electrodom\xe9sticos",icon:"https://www.flaticon.com/premium-icon/icons/svg/2030/2030135.svg"}],p=t(76),g=t(84),h=function(e){e.id;var a=e.name,t=e.icon;return r.a.createElement("a",{href:a},r.a.createElement(g.a,{className:"shadow rounded p-3 mt-3 grow text-center"},r.a.createElement(g.a.Img,{variant:"top",className:"icon",src:t,style:{width:"150px"}}),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,{className:"text-center text-dark"},a))))},v=function(e){var a=e.wasteCategories;return r.a.createElement(p.a,{className:""},a.map((function(e,t){return r.a.createElement(h,{className:"col-6",key:t,id:a[t].id,name:a[t].name,icon:a[t].icon})})))},b=function(e){e.searchfield;var a=e.searchChange;return r.a.createElement("div",{className:"searchbox"},r.a.createElement("input",{className:"searchbox-input",type:"search",placeholder:"Diga-nos o que pretende reciclar",onChange:a}))},y=function(){var e=Object(n.useState)(f),a=Object(E.a)(e,2),t=a[0],o=(a[1],Object(n.useState)("")),c=Object(E.a)(o,2),l=c[0],i=c[1],m=t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Vamos deixar Portugal mais limpo"),r.a.createElement(b,{searchChange:function(e){i(e.target.value)}}),r.a.createElement(v,{wasteCategories:m}))},x=t(79),N=t(57),O=t(44),j=t(10),P=t(11),w=t.n(P),C=t(20),k=t(78),q=t(80),S=function(e){e.id;var a=e.name,t=e.location,n=e.distance,o=e.coords;return r.a.createElement(g.a,null,r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,a),r.a.createElement(g.a.Subtitle,null,t),r.a.createElement(g.a.Text,null,"Dist\xe2ncia: ",n),r.a.createElement(g.a.Link,{href:"#"},"Reportar"),r.a.createElement(g.a.Link,{href:"".concat(document.URL,"/").concat(a,"-").concat(t,"/").concat(o)},"Dire\xe7\xf5es")))},M=function(e){var a=e.location,t=e.category,o=Object(n.useState)([]),c=Object(E.a)(o,2),i=c[0],m=c[1],s=Object(n.useState)([]),u=Object(E.a)(s,2),d=u[0],f=u[1];function g(){var e=[];i.map((function(t,n){var r=i[n].geometry.coordinates[0],o=i[n].geometry.coordinates[1],c=function(e,a,t,n,r){if(e==t&&a==n)return 0;var o=Math.PI*e/180,c=Math.PI*t/180,l=a-n,i=Math.PI*l/180,m=Math.sin(o)*Math.sin(c)+Math.cos(o)*Math.cos(c)*Math.cos(i);return m>1&&(m=1),m=60*(m=180*(m=Math.acos(m))/Math.PI)*1.1515,"K"==r&&(m*=1.609344),"N"==r&&(m*=.8684),m}(a.latitude,a.longitude,o,r,"K");e[n]=c})),f(e)}var h=function(){var e=Object(C.a)(w.a.mark((function e(){var a,t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://services.arcgis.com/1dSrzEWVQn5kHHyK/arcgis/rest/services/Amb_Reciclagem/FeatureServer/0/query?where=1%3D1&outFields=*&f=pgeojson");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,m(t.features);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){d.map((function(e,a){m([].concat(Object(j.a)(i),[i[a]=Object(O.a)(Object(O.a)({},i[a]),{},{distance:d[a]})]))})),m(i.sort((function(e,a){return e.distance-a.distance})))}),[d]),Object(n.useEffect)((function(){"Papel"!==t&&"Vidro"!==t&&"Pl\xe1stico"!==t||h()}),[]),Object(n.useEffect)((function(){g()}),[i,a]);var v=Object(n.useState)(!1),b=Object(E.a)(v,2),y=b[0],x=b[1],N=function(){return x(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{className:"cards-list"},r.a.createElement("div",{className:"clearfix p-2"},r.a.createElement("h3",{className:"list-title float-left"},"Pontos de Recolha"),r.a.createElement(k.a,{className:"float-right",variant:"primary",onClick:function(){return x(!0)}},"Adicionar")),r.a.createElement(p.a,{style:{columnCount:"1"}},i.slice(0,10).map((function(e,a){return r.a.createElement(S,{key:a,id:i[a].id,name:i[a].properties.TPRS_DESC,location:i[a].properties.FRE_AB,distance:i[a].distance,coords:i[a].geometry.coordinates})})))),r.a.createElement(q.a,{show:y,onHide:N,backdrop:"static",keyboard:!1},r.a.createElement(q.a.Header,{closeButton:!0},r.a.createElement(q.a.Title,null,"Adicionar Ponto de Recolha")),r.a.createElement(q.a.Body,null,"Conhece algum ponto de recolha que n\xe3o esteja identificado?"),r.a.createElement(q.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:N},"N\xe3o"),r.a.createElement(k.a,{variant:"primary",href:"/".concat(t,"/addPointWithMap")},"Sim, e estou no local"),r.a.createElement(k.a,{variant:"primary",href:"/".concat(t,"/addPointForm")},"Sim, e sei a morada"))))},R=function(){return r.a.createElement(g.a,null,r.a.createElement(g.a.Img,{variant:"left",src:"https://via.placeholder.com/150"}),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,"Some Place"),r.a.createElement(g.a.Text,null,"Uma breve descri\xe7\xe3o do local e assim por diante")))},T=function(){return r.a.createElement(l.a,{className:"cards-list"},r.a.createElement("div",{className:"clearfix p-2"},r.a.createElement("h3",{className:"list-title float-left"},"Outras dicas"),r.a.createElement(k.a,{className:"float-right",variant:"primary"},"Adicionar")),r.a.createElement(p.a,{style:{columnCount:"1"}},r.a.createElement(R,null),r.a.createElement(R,null)))},L=function(){var e=Object(i.g)().selectedCategory,a=Object(n.useState)({}),t=Object(E.a)(a,2),o=t[0],c=t[1];function m(e){var a=e.coords,t=a.latitude,n=a.longitude;c({latitude:t,longitude:n})}return Object(n.useEffect)((function(){var e=navigator.geolocation.watchPosition(m);return function(){return navigator.geolocation.clearWatch(e)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},e),r.a.createElement(l.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(N.a,null,r.a.createElement(M,{location:o,category:e})),r.a.createElement(N.a,null,r.a.createElement(T,null)))))};function A(e){var a=e.options,t=e.onMount,o=e.className,c=e.onMountProps,l=Object(n.useRef)(),i=Object(n.useState)(),m=Object(E.a)(i,2),s=m[0],u=m[1];return Object(n.useEffect)((function(){var e=function(){return u(new window.google.maps.Map(l.current,a))};if(!window.google){var t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCsFiLuvaPEogirLPRzA-kmsK9NLoQ8MJc",document.head.append(t),t.addEventListener("load",e),function(){return t.removeEventListener("load",e)}}e()}),[a]),s&&"function"===typeof t&&t(s,c),r.a.createElement("div",Object.assign({style:{height:"60vh",margin:"1em 0",borderRadius:"0.5em"}},{ref:l,className:o}))}A.defaultProps={options:{center:{lat:38.71667,lng:-9.13333},zoom:5}};var F=function(){var e=Object(i.g)(),a=(e.selectedCategory,e.selectedPoint),t=e.coordinates.split(",");var n={options:{center:{lat:38.71667,lng:-9.13333},zoom:12},onMount:function(e,a){new window.google.maps.Marker({map:e,position:a.coords,label:a.title,title:a.title}).addListener("click",(function(){window.location.href=a.url}))},onMountProps:{coords:{lat:parseFloat(t[1]),lng:parseFloat(t[0])},title:"",url:""}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},a),r.a.createElement(l.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(N.a,null,r.a.createElement(A,n)),r.a.createElement(N.a,null,r.a.createElement("h3",null,"Neste ponto de recolha pode reciclar:"),r.a.createElement("ul",null,r.a.createElement("li",null,"Papel"),r.a.createElement("li",null,"Pl\xe1stico"),r.a.createElement("li",null,"Vidro"))))))},I=t(81),B=t(40),z=function(){var e=Object(i.g)().selectedCategory,a=Object(n.useState)(f),t=Object(E.a)(a,2),o=t[0],c=(t[1],Object(n.useState)({})),m=Object(E.a)(c,2),s=m[0],u=m[1];function d(e){var a=e.coords,t=a.latitude,n=a.longitude;u({latitude:t,longitude:n})}Object(n.useEffect)((function(){var e=navigator.geolocation.watchPosition(d);return function(){return navigator.geolocation.clearWatch(e)}}),[]);var p={options:{center:{lat:38.71667,lng:-9.13333},zoom:12},onMount:function(e,a){new window.google.maps.Marker({map:e,position:a.coords,label:a.title,title:a.title}).addListener("click",(function(){window.location.href=a.url}))},onMountProps:{coords:{lat:s.latitude,lng:s.longitude},title:"A Minha Localiza\xe7\xe3o",url:""}},g=Object(B.a)(),h=g.register,v=g.errors,b=g.handleSubmit,y=Object(n.useState)(!1),O=Object(E.a)(y,2),j=O[0],P=O[1],w=function(){return P(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Adicionar Ponto de Recolha"),r.a.createElement(l.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(N.a,null,r.a.createElement(A,p)),r.a.createElement(N.a,null,r.a.createElement("p",{className:"form-information"},"Por favor tenha aten\xe7\xe3o que estes dados ser\xe3o confirmados, por favor coloque tudo o mais certo poss\xedvel de forma a facilitar a nossa confirma\xe7\xe3o. Todos os campos s\xe3o obrigat\xf3rios"),r.a.createElement(I.a,{onSubmit:b((function(e){w()}))},r.a.createElement(I.a.Group,{controlId:"formName"},r.a.createElement(I.a.Text,{className:"text-danger"},(null===v||void 0===v?void 0:v.name)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Nome",name:"name",ref:h({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Text,{className:"text-danger"},(null===v||void 0===v?void 0:v.city)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Localidade",name:"city",ref:h({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")),r.a.createElement(I.a.Group,null,o.map((function(e){return r.a.createElement("div",{key:e.name,className:"mb-3"},r.a.createElement(I.a.Check,{type:"checkbox",id:"checkbox-".concat(e.name),label:e.name,name:e.name,ref:h}))}))),r.a.createElement(k.a,{className:"float-right",type:"submit"},"Confirmar")),r.a.createElement(k.a,{variant:"secondary",href:"/".concat(e)},"Cancelar")))),r.a.createElement(q.a,{show:j,onHide:function(){return P(!1)},backdrop:"static",keyboard:!1},r.a.createElement(q.a.Header,{closeButton:!0},r.a.createElement(q.a.Title,null,"Ponto de Recolha Adicionado")),r.a.createElement(q.a.Body,null,"O Ponto de Recolha que adicionou ser\xe1 adicionado assim que for confirmado pela nossa equipa. Obrigada pela sua colabora\xe7\xe3o. Juntos fazemos Portugal um pa\xeds mais verde!")))},W=function(){var e=Object(i.g)().selectedCategory,a=Object(n.useState)(f),t=Object(E.a)(a,2),o=t[0],c=(t[1],Object(B.a)()),l=c.register,m=c.errors,s=c.handleSubmit,u=Object(n.useState)(!1),d=Object(E.a)(u,2),p=d[0],g=d[1],h=function(){return g(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Adicionar Ponto de Recolha com Morada"),r.a.createElement("p",{className:"form-information"},"Por favor tenha aten\xe7\xe3o que estes dados ser\xe3o confirmados, por favor coloque tudo o mais certo poss\xedvel de forma a facilitar a nossa confirma\xe7\xe3o."),r.a.createElement(I.a,{onSubmit:s((function(e){h()}))},r.a.createElement(I.a.Group,{controlId:"formName"},r.a.createElement(I.a.Text,{className:"text-danger"},(null===m||void 0===m?void 0:m.name)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Nome",name:"name",ref:l({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")),r.a.createElement(I.a.Group,null,r.a.createElement(I.a.Text,{className:"text-danger"},(null===m||void 0===m?void 0:m.city)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Localidade",name:"city",ref:l({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")),r.a.createElement(I.a.Group,{controlId:"formCategories",name:"categories",ref:l({required:!0})},o.map((function(e){return r.a.createElement("div",{key:e.name,className:"mb-3"},r.a.createElement(I.a.Check,{type:"checkbox",id:"checkbox-".concat(e.name),label:e.name,name:e.name,ref:l}))}))),r.a.createElement(I.a.Group,{controlId:"formAddress"},r.a.createElement(x.a,null,r.a.createElement(N.a,null,r.a.createElement(I.a.Text,{className:"text-danger"},(null===m||void 0===m?void 0:m.streetAdd)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"Rua",name:"streetAdd",ref:l({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")),r.a.createElement(N.a,null,r.a.createElement(I.a.Text,{className:"text-danger"},(null===m||void 0===m?void 0:m.numberAdd)&&"Este campo \xe9 obrigat\xf3rio"),r.a.createElement(I.a.Control,{type:"text",placeholder:"N\xba",name:"numberAdd",ref:l({required:!0})}),r.a.createElement(I.a.Text,{className:"text-muted"},"* Required")))),r.a.createElement(I.a.Group,{controlId:"formWebsite"},r.a.createElement(I.a.Control,{type:"text",placeholder:"Website",name:"website",ref:l({required:!1})})),r.a.createElement(k.a,{className:"float-right",variant:"primary",type:"submit"},"Confirmar")),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"secondary",href:"/".concat(e)},"Cancelar"),r.a.createElement(q.a,{show:p,onHide:function(){return g(!1)},backdrop:"static",keyboard:!1,onExiting:function(){return r.a.createElement(i.a,{to:"/"})}},r.a.createElement(q.a.Header,{closeButton:!0},r.a.createElement(q.a.Title,null,"Ponto de Recolha Adicionado")),r.a.createElement(q.a.Body,null,"O Ponto de Recolha que adicionou ser\xe1 adicionado assim que for confirmado pela nossa equipa. Obrigada pela sua colabora\xe7\xe3o. Juntos fazemos Portugal um pa\xeds mais verde!")))},G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(l.a,{fluid:!0},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/:selectedCategory/addPointWithMap"},r.a.createElement(z,null)),r.a.createElement(i.b,{path:"/:selectedCategory/addPointForm"},r.a.createElement(W,null)),r.a.createElement(i.b,{path:"/:selectedCategory/:selectedPoint/:coordinates"},r.a.createElement(F,null)),r.a.createElement(i.b,{path:"/EcoPortugal/:selectedCategory"},r.a.createElement(L,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(y,null)))),r.a.createElement(d,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=t(24);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H.a,{basename:"/EcoPortugal"},r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.85f12721.chunk.js.map